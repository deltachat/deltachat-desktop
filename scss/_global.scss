* {
  box-sizing: border-box;
  font-variant-ligatures: none;
}

html {
  height: 100%;
}

body {
  position: relative;
  height: 100%;
  width: 100%;
  margin: 0;
  font-family: $roboto !important;
  font-size: 14px;
  color: var(--globalText);
  background-color: var(--globalBackground);
  cursor: default;
}

.window {
  height: $content-height;
  margin-top: $nav-bar-height;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  overflow: auto;
  padding: 10px 10px;
}

ul {
  list-style: none;
  padding-left: 0;
}

h1,
h2,
h3,
h4,
h5,
p,
.bp4-button,
button > span,
label {
  user-select: none;
}

button {
  cursor: pointer;
  font-size: inherit;
  user-select: none;
}

a {
  color: var(--globalLinkColor);
}

.SelectGroupImage {
  width: 100px;
}

.GroupImage {
  width: 100px;
  height: 100px;
  cursor: pointer;
}

.RemoveGroupImage {
  width: 100px;
  margin-bottom: 4px;
}

$unread-badge-size: 21px;

input[type='text'],
input[type='search'],
textarea {
  &:active,
  &:focus {
    outline: 1px solid $color-global-textarea-outline;
  }
}

input:focus {
  outline: 0 !important;
}

//yellow/blue border fix
button:focus {
  outline: none;
}
button:focus {
  outline: none;
}

::-webkit-scrollbar {
  width: 6px;
  height: 0;
}

::-webkit-scrollbar-track {
  background: var(--globalBackground);
}

::-webkit-scrollbar-thumb {
  background: var(--scrollbarThumb);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbarThumbHover);
}

::-webkit-scrollbar-corner {
  background: transparent;
}

code {
  background-color: rgba(0, 0, 0, 0.25);
  border-radius: 0.8pt;
  padding: 0.4pt 3pt;
}

.markdown-code {
  display: block;
  background-color: rgba(0, 0, 0, 0.25);
  border-radius: 3pt;
  padding: 3pt 4pt;
  border: 1pt rgba(0, 0, 0, 0.35) solid;
}

.markdown-code > code {
  background-color: none;
  border-radius: 0;
  padding: none;
}

.sharp-pixel-image {
  -ms-interpolation-mode: nearest-neighbor;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: -webkit-crisp-edges;
  image-rendering: -moz-crisp-edges;
  image-rendering: -o-crisp-edges;
  image-rendering: pixelated;
}

// toast for errors and success messages
.user-feedback {
  position: fixed;
  top: 60px;
  text-align: center;
  width: 100%;
  z-index: map-get($z-index, user-feedback);
  pointer-events: none;

  p {
    display: inline-block;
    text-align: center;
    font-style: italic;
    font-weight: bold;
    padding: 7px 14px;
    background-color: #696868;
    border-radius: 10px;
    color: white;
    font-size: medium;
    max-width: 90%;
    pointer-events: all;
  }
  &.error p {
    background-color: #b73a3a;
  }
  &.success p {
    background-color: #3ca26a;
  }
}

.crash-screen {
  padding: 10px;

  h1,
  h2,
  code,
  pre {
    user-select: text;
  }

  p {
    margin-top: 20px;
  }

  pre.error-details {
    background-color: rgba(177, 10, 10, 0.25);
    padding: 10px;
    overflow-x: scroll;
    font-family: monospace;
  }

  code {
    background-color: none;
  }
}

/* force usage of our emoji font in code blocks */
code,
kbd,
samp {
  font-family: monospace, $emojifonts;
}

.main-container {
  display: flex;
  position: absolute;
  width: 100%;
  height: 100%;

  // todo move these ones into their files
  .account-list-sidebar {
    --accountSidebarBg: #2c2c2c;

    /* sidebar that moves in is z-index 100, so this higher */
    z-index: 101;
    background-color: var(--accountSidebarBg);

    width: 58px;

    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    align-items: center;

    --als-avatar-size: 42px;
    --als-avatar-margin: 4px;
    --als-active-indicator-color: white;

    .account {
      position: relative;

      margin-top: var(--als-avatar-margin);
      margin-bottom: var(--als-avatar-margin);
      height: var(--als-avatar-size);
      .avatar {
        --local-avatar-size: var(--als-avatar-size);
        --local-avatar-vertical-margin: 0px;
        // --local-avatar-font-size: 26px;

        div.content,
        img.content {
          border-radius: 10%;
        }
      }

      &.active,
      &:hover {
        .avatar::before {
          content: ' ';
          position: absolute;
          overflow: hidden;
          background: var(--als-active-indicator-color);

          --als-active-indicator-height: 25px;

          top: calc(
            calc(var(--als-avatar-size) / 2) - calc(
                var(--als-active-indicator-height) / 2
              )
          );
          margin-inline-start: -12px;
          height: var(--als-active-indicator-height);
          width: 8px;
          border-radius: 20px;
        }
      }

      &:hover {
        .avatar::before {
          --als-active-indicator-height: 15px;
        }
      }

      .account-badge {
        position: absolute;
        z-index: 102;
        bottom: -6px;
        right: -5px;

        .fresh-message-counter,
        .bg-sync-disabled {
          color: var(--unreadCountLabel);
          background-color: var(--unreadCountBg);
          text-align: center;
          font-size: 9pt;
          height: 18px;
          padding: 0px 4pt;
          line-height: 18px;
          border-radius: 10px;
          font-weight: bold;
        }

        .bg-sync-disabled {
          background-color: grey;
          padding: 0px 3pt;
        }
      }
    }

    .add-button {
      margin-top: var(--als-avatar-margin);
      margin-bottom: var(--als-avatar-margin);
      min-height: var(--als-avatar-size);
      min-width: var(--als-avatar-size);
      background: none;

      --add-button-color: #808080;

      color: var(--add-button-color);

      border-radius: 10%;
      border: 1.3pt solid var(--add-button-color);
      font-size: 22px;
      &:hover {
        color: var(--accountSidebarBg);
        background: var(--add-button-color);
      }
    }

    overflow-y: scroll;
    scrollbar-width: 3px;
    &::-webkit-scrollbar {
      width: 0px;
    }
  }

  .login-screen {
    flex-grow: 1;
  }

  .main-screen {
    flex-grow: 1;
    position: relative;

    .chat-list,
    .message-list-and-composer {
      margin-top: 0;
    }
  }

  .navbar-wrapper {
    position: relative;
  }
}
